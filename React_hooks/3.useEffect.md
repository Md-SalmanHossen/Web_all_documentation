### `useEffect` рж╣рзБржХржЯрж┐ ржирж┐ржпрж╝рзЗ ржмрж╛ржВрж▓рж╛ржпрж╝ ржмрж┐рж╕рзНрждрж╛рж░рж┐рждржнрж╛ржмрзЗ рж╕ржм ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рж╛ рж╣рж▓рзЛ:

---

## **рзз. `useEffect` ржХрзА?**

`useEffect` рж╣рж▓рзЛ React-ржПрж░ ржПржХржЯрж┐ **Hook**, ржпрзЗржЯрж╛ component-ржПрж░ ржоржзрзНржпрзЗ **side effect** ржЪрж╛рж▓рж╛рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред

ржПржЯрж┐ ржХрзНрж▓рж╛рж╕ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ `componentDidMount`, `componentDidUpdate`, ржПржмржВ `componentWillUnmount` ржПрж░ ржХрж╛ржЬржЧрзБрж▓рзЛржХрзЗ рж░рж┐ржкрзНрж▓рзЗрж╕ ржХрж░рзЗ ржлрж╛ржВрж╢ржирж╛рж▓ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛ржпрж╝ред

---

## **рзи. Side Effect ржХрзА?**

**Side effect** рж╣рж▓рзЛ ржПржоржи ржХрж╛ржЬ ржпрзЗржЯрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯрзЗрж░ ржмрж╛ржЗрж░рзЗрж░ ржХрж┐ржЫрзБ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗред ржпрзЗржоржи:

* API ржХрж▓ ржХрж░рж╛
* LocalStorage ржмрж╛ SessionStorage ржмрзНржпржмрж╣рж╛рж░
* DOM ржорзНржпрж╛ржирж┐ржкрзБрж▓рзЗрж╢ржи
* Timer (`setTimeout`, `setInterval`)
* Event listener ржпрзЛржЧ ржХрж░рж╛
* Console log ржмрж╛ analytics ржкрж╛ржарж╛ржирзЛ ржЗрждрзНржпрж╛ржжрж┐

ржПржЗ ржХрж╛ржЬржЧрзБрж▓рзЛ рж╕рж░рж╛рж╕рж░рж┐ JSX-ржП ржХрж░рж╛ ржпрж╛ржпрж╝ ржирж╛, рждрж╛ржЗ ржПржЧрзБрж▓рзЛрж░ ржЬржирзНржп `useEffect` ржжрж░ржХрж╛рж░ рж╣ржпрж╝ред

---

## **рзй. `useEffect` ржПрж░ рж╕рж┐ржиржЯрзНржпрж╛ржХрзНрж╕**

```jsx
useEffect(() => {
  // ржХрж╛ржЬржЯрж╛ ржПржЦрж╛ржирзЗ ржХрж░рж╛ рж╣ржпрж╝ (side effect)

  return () => {
    // cleanup ржХрж╛ржЬ ржПржЦрж╛ржирзЗ (ржХржорзНржкрзЛржирзЗржирзНржЯ ржЖржиржорж╛ржЙржирзНржЯ рж╣рж▓рзЗ ржЪрж▓рзЗ)
  };
}, [dependency]);
```

---

## **рзк. `useEffect` ржПрж░ рж▓рж╛ржЗржлрж╕рж╛ржЗржХрзЗрж▓ (Mount, Update, Unmount)**

### **A. Mount (ржкрзНрж░ржержоржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣ржУрзЯрж╛рж░ ржкрж░)**

* ржпржЦржи ржХржорзНржкрзЛржирзЗржирзНржЯ ржкрзНрж░ржержоржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣рзЯ, рждржЦржи `useEffect` ржЪрж╛рж▓рзБ рж╣рзЯред

### **B. Update (Dependency ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ)**

* ржпржжрж┐ ржЖржкржирж┐ `useEffect` ржПрж░ ржжрзНржмрж┐рждрзАрзЯ ржЖрж░рзНржЧрзБржорзЗржирзНржЯрзЗ ржХрзЛржирзЛ dependency ржжрзЗржи, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЗ ржбрзЗржЯрж╛ ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ ржЖржмрж╛рж░ `useEffect` ржЪрж▓ржмрзЗред

```jsx
useEffect(() => {
  console.log("Name ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рзЯрзЗржЫрзЗ");
}, [name]);
```

### **C. Unmount (ржХржорзНржкрзЛржирзЗржирзНржЯ ржорзБржЫрзЗ ржлрзЗрж▓рж╛рж░ рж╕ржорзЯ)**

* ржпржЦржи ржХржорзНржкрзЛржирзЗржирзНржЯ ржбрзЛржо ржерзЗржХрзЗ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣рзЯ (unmount), рждржЦржи `useEffect` ржПрж░ return ржлрж╛ржВрж╢ржи ржмрж╛ cleanup ржлрж╛ржВрж╢ржиржЯрж┐ ржЪрж╛рж▓рж╛ржирзЛ рж╣рзЯред

```jsx
useEffect(() => {
  const timer = setInterval(() => {
    console.log("Running...");
  }, 1000);

  return () => {
    clearInterval(timer); // cleanup
    console.log("Component unmounted");
  };
}, []);
```

---

## **рзл. Dependency Array ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ?**

| Dependency         | ржХржЦржи рж░рж╛ржи рж╣ржмрзЗ           |
| ------------------ | --------------------- |
| `[]` (ржЦрж╛рж▓рж┐ ржЕрзНржпрж╛рж░рзЗ) | рж╢рзБржзрзБ ржкрзНрж░ржержоржмрж╛рж░ (Mount) |
| `[value]`          | value ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ    |
| ржХрж┐ржЫрзБ ржирж╛ ржжрж┐рж▓рзЗ       | ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░рзЗ     |

---

## **рзм. ржХрж┐ржЫрзБ ржЙржжрж╛рж╣рж░ржг:**

### тЬЕ рж╢рзБржзрзБ ржПржХржмрж╛рж░ ржЪрж╛рж▓рж╛рждрзЗ ржЪрж╛ржЗ (Mount only)

```jsx
useEffect(() => {
  console.log("Component mounted");
}, []);
```

### тЬЕ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрзЗржЯрж╛ ржкрж░рж┐ржмрж░рзНрждржирзЗ ржЪрж╛рж▓рж╛рждрзЗ ржЪрж╛ржЗ

```jsx
useEffect(() => {
  console.log("Count ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯрзЗржЫрзЗ");
}, [count]);
```

### тЬЕ Cleanup рж╕рж╣ ржмрзНржпржмрж╣рж╛рж░

```jsx
useEffect(() => {
  const interval = setInterval(() => {
    console.log("Tick");
  }, 1000);

  return () => clearInterval(interval); // Cleanup
}, []);
```

---

## **рзн. рж╕ржВржХрзНрж╖рзЗржкрзЗ `useEffect` ржПрж░ рждрж┐ржи ржзрж╛ржк**

1. **Mount:** ржкрзНрж░ржержоржмрж╛рж░ ржЪрж╛рж▓рзБ рж╣рзЯ
2. **Update:** dependency ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ ржЖржмрж╛рж░ ржЪрж▓рзЗ
3. **Unmount:** ржХржорзНржкрзЛржирзЗржирзНржЯ ржбрж┐рж▓рж┐ржЯ рж╣рж▓рзЗ cleanup рж╣рзЯ

---
`useEffect` рж╣рзБржХрзЗрж░ ржоржзрзНржпрзЗ **Mount**, **Update**, ржЖрж░ **Unmount** тАФ ржПржЗ рждрж┐ржиржЯрж╛ ржзрж╛ржк ржЦрзБржм ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред ржирж┐ржЪрзЗ ржПржЧрзБрж▓рзЛрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрзНржпрж╛ржЦрзНржпрж╛ ржжрзЗрзЯрж╛ рж╣рж▓рзЛ, ржпрж╛рждрзЗ рждрзБржорж┐ React ржХржорзНржкрзЛржирзЗржирзНржЯ рж▓рж╛ржЗржлрж╕рж╛ржЗржХрзЗрж▓ ржнрж╛рж▓рзЛржнрж╛ржмрзЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЛ:

---

## **рзз. Mount (ржкрзНрж░ржержоржмрж╛рж░ component рж░рзЗржирзНржбрж╛рж░ рж╣ржУрзЯрж╛)**

### **ржХрж┐ рж╣рзЯ ржПржЗ рж╕ржорзЯрзЗ:**

* ржХржорзНржкрзЛржирзЗржирзНржЯ ржпржЦржи ржкрзНрж░ржержоржмрж╛рж░ DOM-ржП ржпрзБржХрзНржд рж╣рзЯ, рждржЦржи `useEffect` ржПрж░ ржнрзЗрждрж░рзЗрж░ ржХрзЛржб **ржПржХржмрж╛рж░** ржЪрж╛рж▓рзБ рж╣рзЯред
* ржПржЗ рж╕ржорзЯ API call, data fetch, event listener ржпрзЛржЧ ржХрж░рж╛, ржмрж╛ ржХрзЛржирзЛ ржЗржирзНржЯрж╛рж░ржирж╛рж▓ ржХрж╛ржЬ ржХрж░рж╛ рж╣рзЯред

### **ржХрж┐ржнрж╛ржмрзЗ ржЪрж┐ржиржмрзЛ ржПржЯрж╛ Mount рж╣рзЯрзЗржЫрзЗ:**

```jsx
useEffect(() => {
  console.log("Component Mounted");
}, []);
```

### **ржоржирзЗ рж░рж╛ржЦржмрзЗ:**

* ржЦрж╛рж▓рж┐ dependency array (`[]`) ржжрж┐рж▓рзЗ `useEffect` рж╢рзБржзрзБ Mount ржПрж░ рж╕ржорзЯ ржПржХржмрж╛рж░ржЗ ржЪрж▓рзЗред

---

## **рзи. Update (Component rerender рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ)**

### **ржХрж┐ рж╣рзЯ ржПржЗ рж╕ржорзЯрзЗ:**

* ржпржЦржи component ржПрж░ state ржмрж╛ props ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рзЯ ржПржмржВ dependency array рждрзЗ рж╕рзЗржЗ value ржерж╛ржХрзЗ, рждржЦржи `useEffect` ржЖржмрж╛рж░ ржЪрж▓рзЗред

### **ржЙржжрж╛рж╣рж░ржг:**

```jsx
useEffect(() => {
  console.log("Count updated");
}, [count]);
```

### **ржорж╛ржирзЗ:**

`count` ржПрж░ ржорж╛ржи ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рж▓рзЗ ржПржЗ `useEffect` ржЖржмрж╛рж░ ржЪрж╛рж▓рзБ рж╣ржмрзЗред

### **Extra Point:**

* ржирждрзБржи `useEffect` ржЪрж╛рж▓рзБ рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗ ржЖржЧрзЗрж░ `useEffect` ржПрж░ **cleanup function** (ржпржжрж┐ ржерж╛ржХрзЗ) ржЪрж╛рж▓рзБ рж╣рзЯред

---

## **рзй. Unmount (Component DOM ржерзЗржХрзЗ рж╕рж░рж┐рзЯрзЗ ржлрзЗрж▓рж╛)**

### **ржХрж┐ рж╣рзЯ ржПржЗ рж╕ржорзЯрзЗ:**

* ржпржЦржи ржХржорзНржкрзЛржирзЗржирзНржЯ DOM ржерзЗржХрзЗ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣рзЯ (ржпрзЗржоржи, ржЕржирзНржп ржкрзЗржЬрзЗ ржЪрж▓рзЗ ржпрж╛ржУрзЯрж╛, ржХрзЛржирзЛ рж╢рж░рзНрждрзЗ рж╣рж╛ржЗржб рж╣ржУрзЯрж╛), рждржЦржи `useEffect` ржПрж░ return ржлрж╛ржВрж╢ржи (cleanup) ржЪрж╛рж▓рж╛ржирзЛ рж╣рзЯред

### **ржПржЗ рж╕ржорзЯрзЗ рж╕рж╛ржзрж╛рж░ржгржд ржХрж░рж╛ рж╣рзЯ:**

* Event listener рж░рж┐ржорзБржн ржХрж░рж╛
* Interval/Timeout clear ржХрж░рж╛
* Subscription ржмржирзНржз ржХрж░рж╛

### **ржЙржжрж╛рж╣рж░ржг:**

```jsx
useEffect(() => {
  const interval = setInterval(() => {
    console.log("Running...");
  }, 1000);

  return () => {
    clearInterval(interval); // Unmount ржмрж╛ update cleanup
    console.log("Component Unmounted");
  };
}, []);
```

---

## **ржПржХрж╕рж╛ржерзЗ ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг ржжрж┐рзЯрзЗ ржмрзБржЭрж┐:**

```jsx
import { useEffect, useState } from 'react';

function MyComponent() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log("Mounted or Updated with count:", count);

    return () => {
      console.log("Cleanup before update/unmount");
    };
  }, [count]);

  return (
    <div>
      <h1>{count}</h1>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  );
}
```

### ржПржЗ ржХрзЛржбрзЗ:

* ржкрзНрж░ржержоржмрж╛рж░ ржЪрж▓ржмрзЗ: "Mounted or Updated with count: 0"
* `count` ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ:

  * ржЖржЧрзЗрж░ `useEffect` ржПрж░ cleanup (console.log "Cleanup...") ржЪрж╛рж▓ржмрзЗ
  * рждрж╛рж░ржкрж░ ржирждрзБржи `useEffect` ржЪрж▓ржмрзЗ

---

## **рж╕ржВржХрзНрж╖рзЗржкрзЗ: рждрж┐ржиржЯрж┐ ржзрж╛ржк**

| ржзрж╛ржк     | ржХржЦржи рж╣рзЯ                          | ржХрзА рж╣рзЯ                             |
| ------- | ------------------------------- | --------------------------------- |
| Mount   | ржХржорзНржкрзЛржирзЗржирзНржЯ ржкрзНрж░ржержоржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ рж╣рж▓рзЗ | `useEffect(() => {}, [])` ржЪрж╛рж▓рзБ рж╣рзЯ |
| Update  | dependency ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рж▓рзЗ        | ржирждрзБржи `useEffect`, ржЖржЧрзЗрж░ `cleanup`  |
| Unmount | ржХржорзНржкрзЛржирзЗржирзНржЯ DOM ржерзЗржХрзЗ ржорзБржЫрзЗ ржЧрзЗрж▓рзЗ   | `return () => {}` ржЪрж╛рж▓рж╛ржирзЛ рж╣рзЯ       |

---
рждрзБржорж┐ ржЦрзБржм ржнрж╛рж▓рзЛржнрж╛ржмрзЗ рж▓ржХрзНрж╖рзНржп ржХрж░рзЗржЫрзЛ тАФ `useEffect` ржПрж░ **syntax**-ржП рждрж┐ржиржЯрж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЕржВрж╢ ржерж╛ржХрзЗ:

> **1. Side Effect Function**
> **2. Cleanup Function (optional)**
> **3. Dependency Array**

ржПржЦржи ржЪрж▓ ржПржЗ рждрж┐ржиржЯрж╛ ржЕржВрж╢ ржЦрзБржмржЗ ржмрж┐рж╕рзНрждрж╛рж░рж┐рждржнрж╛ржмрзЗ ржмрзБржЭрзЗ ржирж┐ржЗ, ржпрзЗржирзЛ ржкрзНрж░рждрж┐ржЯрж╛ рж▓рж╛ржЗржирзЗрж░ ржкрзЗржЫржирзЗрж░ ржЙржжрзНржжрзЗрж╢рзНржп ржХрзНрж▓рж┐рзЯрж╛рж░ рж╣рзЯред

---

## **рзз. Side Effect Function (ржорзВрж▓ ржХрж╛ржЬ ржпрзЗржЯрж╛ рждрзБржорж┐ ржХрж░рждрзЗ ржЪрж╛ржУ)**

### **ржПржЯрж╛ ржХрзА?**

* ржПржЗ ржЕржВрж╢рзЗ рж╕рзЗржЗ ржХрзЛржб рж▓рзЗржЦрж╛ рж╣рзЯ ржпрзЗржЯрж╛ ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ рж╣ржУржпрж╝рж╛рж░ ржкрж░ ржЪрж╛рж▓рж╛ржирзЛ ржжрж░ржХрж╛рж░ред
* ржпрзЗржоржи: API call, console log, event listener ржпрзБржХрзНржд ржХрж░рж╛, timer рж╢рзБрж░рзБ ржХрж░рж╛ ржЗрждрзНржпрж╛ржжрж┐ред

### **ржХрзЛржбрзЗ ржжрзЗржЦрзЛ:**

```jsx
useEffect(() => {
  console.log("Side effect ржЪрж▓ржЫрзЗ");
}, []);
```

### **ржПржЦрж╛ржирзЗ ржХрзА рж╣ржЪрзНржЫрзЗ?**

* ржХржорзНржкрзЛржирзЗржирзНржЯ рж░рзЗржирзНржбрж╛рж░ рж╣ржУржпрж╝рж╛рж░ ржкрж░ `console.log()` рж╣ржЪрзНржЫрзЗ тАФ ржПржЯрж╛ржЗ рж╕рж╛ржЗржб ржЗржлрзЗржХрзНржЯред

---

## **рзи. Cleanup Function (ржлрж╛ржВрж╢ржирзЗрж░ return ржЕржВрж╢)**

### **ржПржЯрж╛ ржХрзА?**

* ржпржжрж┐ рждрзБржорж┐ ржХрзЛржирзЛ ржЯрж╛ржЗржорж╛рж░ ржЪрж╛рж▓рж╛ржУ, ржЗржнрзЗржирзНржЯ рж▓рж┐рж╕рзЗржирж╛рж░ ржЕрзНржпрж╛ржб ржХрж░рзЛ, рждрж╛рж╣рж▓рзЗ component unmount рж╣ржУржпрж╝рж╛рж░ ржЖржЧрзЗ рж╕рзЗржЧрзБрж▓рзЛ **ржмржирзНржз ржХрж░рж╛** ржжрж░ржХрж╛рж░ тАФ ржПржЗ ржХрж╛ржЬржЧрзБрж▓рзЛ `cleanup` ржлрж╛ржВрж╢ржирзЗ ржХрж░рж╛ рж╣ржпрж╝ред
* ржПржЯрж╛ ржЕржкрж╢ржирж╛рж▓, ржХрж┐ржирзНрждрзБ ржЕржирзЗржХ рж╕ржоржпрж╝ ржЦрзБржм ржжрж░ржХрж╛рж░рж┐ред

### **ржХрзЛржбрзЗ ржжрзЗржЦрзЛ:**

```jsx
useEffect(() => {
  const interval = setInterval(() => {
    console.log("Ticking...");
  }, 1000);

  return () => {
    clearInterval(interval);  // Cleanup: ржЯрж╛ржЗржорж╛рж░ ржмржирзНржз
    console.log("Component Unmounted or Updated");
  };
}, []);
```

### **ржПржЦрж╛ржирзЗ ржХрзА рж╣ржЪрзНржЫрзЗ?**

* Interval ржЪрж╛рж▓рзБ рж╣ржЪрзНржЫрзЗ тАФ ржПржЯрж╛ рж╕рж╛ржЗржб ржЗржлрзЗржХрзНржЯред
* Component unmount рж╣рж▓рзЗ ржмрж╛ update рж╣ржУрзЯрж╛рж░ ржЖржЧрзЗржЗ `clearInterval` ржжрж┐рзЯрзЗ ржмржирзНржз ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ тАФ ржПржЯрж╛ ржХрзНрж▓рж┐ржиржЖржкред

---

## **рзй. Dependency Array (ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рзЗ ржХржЦржи `useEffect` ржЪрж▓ржмрзЗ)**

### **ржПржЯрж╛ ржХрзА?**

* ржПржЗ array React-ржХрзЗ ржмрж▓рзЗ ржжрзЗрзЯ ржХржмрзЗ `useEffect` ржЖржмрж╛рж░ ржЪрж╛рж▓рж╛ржирзЛ ржжрж░ржХрж╛рж░ред

### **рждрж┐ржиржЯрж┐ ржЕржмрж╕рзНржерж╛:**

#### тЬЕ A. `[]` (ржЦрж╛рж▓рж┐ ржЕрзНржпрж╛рж░рзЗ)

```jsx
useEffect(() => {
  console.log("рж╢рзБржзрзБ ржкрзНрж░ржержоржмрж╛рж░ ржЪрж▓ржЫрзЗ");
}, []);
```

* рж╢рзБржзрзБ ржкрзНрж░ржержоржмрж╛рж░ (Mount) ржЪрж▓ржмрзЗред
* ржПрж░ржкрж░ ржЖрж░ ржХржЦржирзЛ ржЪрж▓ржмрзЗ ржирж╛ред

---

#### тЬЕ B. `[value]` (ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрж┐ржкрзЗржирзНржбрзЗржирзНрж╕рж┐)

```jsx
useEffect(() => {
  console.log("value ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рзЯрзЗржЫрзЗ");
}, [value]);
```

* `value` ржпрждржмрж╛рж░ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣ржмрзЗ, рждрждржмрж╛рж░ ржЪрж▓ржмрзЗред

---

#### тЬЕ C. Dependency ржирж╛ ржжрж┐рж▓рзЗ

```jsx
useEffect(() => {
  console.log("ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░рзЗ ржЪрж▓рзЗ");
});
```

* ржкрзНрж░рждрж┐ржмрж╛рж░ component рж░рзЗржирзНржбрж╛рж░ рж╣рж▓рзЗ effect ржЪрж▓ржмрзЗред
* рж╕рж╛ржзрж╛рж░ржгржд ржПржЗржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржарж┐ржХ ржирж╛, performance issue рж╣рждрзЗ ржкрж╛рж░рзЗред

---

## **рж╕рж╛рж░рж╛ржВрж╢ ржЙржжрж╛рж╣рж░ржг: рждрж┐ржиржЯрж┐ ржПржХрж╕рж╛ржерзЗ**

```jsx
useEffect(() => {
  // тЬЕ Side effect
  console.log("Component Active");

  // тЬЕ Cleanup
  return () => {
    console.log("Component will Unmount or Update");
  };
}, [count]); // тЬЕ Dependency
```

---

## **ржЙржкрж╕ржВрж╣рж╛рж░:**

| ржЕржВрж╢                   | ржХрж╛ржЬ         | ржХржЦржи ржЪрж▓рзЗ                            |
| --------------------- | ----------- | ---------------------------------- |
| `useEffect(() => {})` | Side effect | Mount + Dependency update          |
| `return () => {}`     | Cleanup     | Update ржПрж░ ржЖржЧрзЗ ржмрж╛ Unmount ржПрж░ рж╕ржорзЯ    |
| `[dependency]`        | Condition   | ржХрзЛржи ржЕржмрж╕рзНржерж╛рзЯ effect ржЪрж▓ржмрзЗ рждрж╛ ржмрж▓рзЗ ржжрзЗрзЯ |

---


#### `cleanup function` рж╣рж▓рзЛ `useEffect`-ржПрж░ рж╕ржмржЪрзЗрзЯрзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржХрж┐ржирзНрждрзБ ржЕржирзЗржХ рж╕ржорзЯ ржЙржкрзЗржХрзНрж╖рж┐ржд ржЕржВрж╢ред ржПржЯрж╛ ржмрзБржЭрж▓рзЗ рждрзБржорж┐ ржкрж╛рж░ржмрзЗ performance issue, memory leak, ржмрж╛ bug ржХржорж╛рждрзЗред**Cleanup Function: ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрзНржпрж╛ржЦрзНржпрж╛**

### **1. ржХрзА?**

`cleanup function` рж╣рж▓рзЛ `useEffect` ржПрж░ ржнрж┐рждрж░рзЗ ржерж╛ржХрж╛ ржПржоржи ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи, ржпрзЗржЯрж┐ **component unmount рж╣ржУржпрж╝рж╛рж░ рж╕ржоржпрж╝** ржмрж╛ **effect ржкрзБржирж░рж╛рзЯ ржЪрж╛рж▓рж╛ржирзЛрж░ ржЖржЧрзЗржЗ** ржПржХрзНрж╕рж┐ржХрж┐ржЙржЯ рж╣рзЯред

---

### **2. ржХрзЗржи ржжрж░ржХрж╛рж░?**

ржпржЦржиржЗ рждрзБржорж┐ ржХрзЛржирзЛ resource рждрзИрж░рж┐ ржХрж░рзЛ ржпрзЗржоржи:

* **interval ржмрж╛ timeout ржЪрж╛рж▓рж╛ржУ**
* **event listener ржЕрзНржпрж╛ржб ржХрж░рзЛ**
* **subscription (socket, API)** ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ

рждржЦржи рждрзЛржорж╛ржХрзЗ ржирж┐рж╢рзНржЪржпрж╝рждрж╛ ржжрж┐рждрзЗ рж╣ржмрзЗ ржпрзЗ ржПржЧрзБрж▓рзЛ component destroy ржмрж╛ update рж╣рж▓рзЗ **ржмржирзНржз** ржХрж░рзЗ ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗред ржирж╛ ржХрж░рж▓рзЗ:

* Memory leak рж╣ржмрзЗ
* ржкрзБрж░рзЛржирзЛ event ржХрж╛ржЬ ржХрж░ржмрзЗ
* Timer ржмрж╛рж░ржмрж╛рж░ ржЪрж▓ржмрзЗ

---

### **3. Syntax:**

```jsx
useEffect(() => {
  // side effect
  console.log("Effect running");

  return () => {
    // cleanup function
    console.log("Cleanup running before next effect or on unmount");
  };
}, [dependency]);
```

---

### **4. ржХржЦржи ржЪрж▓рзЗ?**

| ржЕржмрж╕рзНржерж╛                     | cleanup ржЪрж▓ржмрзЗ?                           |
| -------------------------- | --------------------------------------- |
| Component ржкрзНрж░ржержоржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░ | ржирж╛                                      |
| Dependency ржЖржкржбрзЗржЯ рж╣рзЯ        | рж╣рзНржпрж╛ржБ (effect ржЪрж╛рж▓рж╛ржирзЛрж░ ржЖржЧрзЗ ржЖржЧрзЗрж░ cleanup) |
| Component unmount рж╣рзЯ       | рж╣рзНржпрж╛ржБ                                   |

---

## **5. Practical ржЙржжрж╛рж╣рж░ржгржЧрзБрж▓рзЛ:**

---

### **Example 1: setInterval/clearInterval**

```jsx
useEffect(() => {
  const timer = setInterval(() => {
    console.log("Timer ticking");
  }, 1000);

  return () => {
    clearInterval(timer); // ржирж╛ ржХрж░рж▓рзЗ ржЯрж╛ржЗржорж╛рж░ ржЪрж▓рждрзЗржЗ ржерж╛ржХржмрзЗ
    console.log("Timer cleaned up");
  };
}, []);
```

---

### **Example 2: Event Listener Add & Remove**

```jsx
useEffect(() => {
  const handleMouseMove = (e) => {
    console.log(`Mouse X: ${e.clientX}`);
  };

  window.addEventListener("mousemove", handleMouseMove);

  return () => {
    window.removeEventListener("mousemove", handleMouseMove);
    console.log("Mouse move listener removed");
  };
}, []);
```

---

### **Example 3: API Subscription Cleanup (ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк)**

```jsx
useEffect(() => {
  const socket = new WebSocket("ws://example.com");

  socket.onmessage = (event) => {
    console.log("New message: ", event.data);
  };

  return () => {
    socket.close(); // рж╕ржВржпрзЛржЧ ржмржирзНржз ржирж╛ ржХрж░рж▓рзЗ рж╕ржорж╕рзНржпрж╛ рж╣ржмрзЗ
    console.log("Socket closed");
  };
}, []);
```

---

## **6. рж▓рж╛ржЗржлрж╕рж╛ржЗржХрзЗрж▓ ржжрзГрж╢рзНржп (Lifecycle Flow)**

1. Component Mount

   * `useEffect` тЖТ ржЪрж╛рж▓рзБ
   * Cleanup тЖТ **ржирж╛** ржЪрж▓рзЗ

2. Dependency Update

   * ржЖржЧрзЗрж░ `cleanup()` тЖТ **ржЪрж▓рзЗ**
   * рждрж╛рж░ржкрж░ ржирждрзБржи `useEffect()` тЖТ ржЪрж▓рзЗ

3. Component Unmount

   * ржЖржЧрзЗрж░ `cleanup()` тЖТ **ржЪрж▓рзЗ**

---

## **7. ржнрзБрж▓ ржпржжрж┐ cleanup ржирж╛ ржжрж╛ржУ?**

* ржЯрж╛ржЗржорж╛рж░ ржмрж╛ ржЗржнрзЗржирзНржЯ listener ржЕржирзЗржХржмрж╛рж░ ржЪрж▓рждрзЗ ржерж╛ржХржмрзЗред
* Component ржмрж╛рж░ржмрж╛рж░ rerender рж╣рж▓рзЗ effect ржЬржорзЗ ржпрж╛ржмрзЗред
* Memory leak рж╣ржмрзЗред
* ржмрзНрж░рж╛ржЙржЬрж╛рж░рзЗ ржЕржкрзНрж░рждрзНржпрж╛рж╢рж┐ржд ржЖржЪрж░ржг (lag, crash) ржжрзЗржЦрж╛ ржпрж╛ржмрзЗред

---

## **рж╢рзЗрж╖ ржХржерж╛:**

> Cleanup ржлрж╛ржВрж╢ржи рж╣рж▓рзЛ React-ржПрж░ **ржЬрж╛ржирж╛рж▓рж╛рж░ ржкрж░рзНржжрж╛ ржЧрзБржЫрж┐рзЯрзЗ ржлрзЗрж▓рж╛** тАФ ржкрзБрж░рж╛рждржи ржЬрж┐ржирж┐рж╕ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржирж╛ ржХрж░рж▓рзЗ, ржирждрзБржи ржЬрж┐ржирж┐рж╕ рж░рж╛ржЦрж▓рзЗржУ ржШрж░ ржПрж▓рзЛржорзЗрж▓рзЛржЗ ржерж╛ржХржмрзЗред

---


#### рждрзБржорж┐ ржпрзЗржЗ `useEffect` ржПрж░ ржнрж┐рждрж░рзЗ `setInterval` ржмрж╛ `setTimeout` ржЗржЙржЬ ржХрж░ржЫрзЛ, рж╕рзЗржЦрж╛ржирзЗ **JavaScript closure** ржмрзНржпржмрж╣рж╛рж░ рж╣ржЪрзНржЫрзЗ тАФ ржПржЯрж╛ React ржирж╛, **JS-ржПрж░ core concept**, ржпрзЗржЯрж╛ `cleanup function` ржП ржирж┐ржЬрзЗ ржерзЗржХрзЗржЗ ржЖрж╕рзЗред


## ЁЯФН рждрж╛рж╣рж▓рзЗ ржкрзНрж░рж╢рзНржи: **Closure ржХрзА?**

### ЁЯУМ **Closure рж╣рж▓ ржПржоржи ржПржХржЯрж┐ ржлрж╛ржВрж╢ржи ржпрж╛ рждрж╛рж░ ржмрж╛ржЗрж░рзЗрж░ рж╕рзНржХрзЛржкрзЗрж░ ржнрзЗрж░рж┐рзЯрзЗржмрж▓ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░рждрзЗ ржкрж╛рж░рзЗ, ржПржоржиржХрж┐ рж╕рзЗржЗ рж╕рзНржХрзЛржк рж╢рзЗрж╖ рж╣рзЯрзЗ ржЧрзЗрж▓рзЗржУред**

---

### тЬЕ ржЙржжрж╛рж╣рж░ржг ржжрж┐рзЯрзЗ ржмрзБржЭрж┐:

```js
function outer() {
  let count = 0;

  function inner() {
    console.log(count);
  }

  return inner;
}

const myFunc = outer(); // outer ржПржХрзНрж╕рж┐ржХрж┐ржЙржЯ рж╣рж▓рзЛ, count = 0
myFunc(); // output: 0 тЖТ ржХрж╛рж░ржг inner ржПржЦржирзЛ count "ржоржирзЗ" рж░рзЗржЦрзЗржЫрзЗ
```

> ржПржЦрж╛ржирзЗ `inner()` рж╣ржЪрзНржЫрзЗ ржПржХржЯрж┐ closure, ржХрж╛рж░ржг рж╕рзЗ `outer()` ржПрж░ ржнрж┐рждрж░рзЗрж░ `count` ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░ржЫрзЗ, ржпржжрж┐ржУ `outer()` function рж╢рзЗрж╖ рж╣рзЯрзЗ ржЧрзЗржЫрзЗред

---

## ЁЯОп рждрж╛рж╣рж▓рзЗ `useEffect` ржПрж░ context ржП ржХрзАржнрж╛ржмрзЗ closure рж╣рзЯ?

### ржирж┐ржЪрзЗрж░ ржХрзЛржбржЯрж╛ ржжрзЗржЦрзЛ:

```jsx
useEffect(() => {
  let count = 0;

  const interval = setInterval(() => {
    count++;
    console.log(count); // ржПржЦрж╛ржирзЗ closure рж╣ржЪрзНржЫрзЗ!
  }, 1000);

  return () => {
    clearInterval(interval);
    console.log("Cleanup: Timer cleared");
  };
}, []);
```

### ЁЯФН ржПржЦрж╛ржирзЗ:

* `setInterval` ржПрж░ ржнрж┐рждрж░рзЗрж░ ржлрж╛ржВрж╢ржи рж╣ржЪрзНржЫрзЗ **closure**ред
* ржХрж╛рж░ржг рж╕рзЗ `count` ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░ржЫрзЗ тАФ ржпрзЗржЯрж╛ `useEffect` ржПрж░ scope ржП ржЫрж┐рж▓ред
* ржПржЗ ржлрж╛ржВрж╢ржиржЯрж╛ `setInterval` ржПрж░ ржнрж┐рждрж░рзЗ ржмрж╛рж░ржмрж╛рж░ execute рж╣рзЯ, ржХрж┐ржирзНрждрзБ рж╕рзЗ `count` ржПрж░ ржорж╛ржи "ржоржирзЗ" рж░рж╛ржЦрждрзЗ ржкрж╛рж░рзЗред

---

## ЁЯОп Cleanup ржлрж╛ржВрж╢ржиржУ closure!

```jsx
return () => {
  clearInterval(interval); // interval ржЯрж╛ useEffect ржПрж░ scope ржПрж░ ржнрж┐рждрж░ ржЫрж┐рж▓
}
```

* ржПржЦрж╛ржирзЗ `cleanup function` рж╣ржЪрзНржЫрзЗ ржПржХ ржзрж░ржирзЗрж░ **closure**, ржХрж╛рж░ржг рж╕рзЗ `interval` ржнрзЗрж░рж┐рзЯрзЗржмрж▓ ржЕрзНржпрж╛ржХрзНрж╕рзЗрж╕ ржХрж░ржЫрзЗ тАФ ржпрзЗржЯрж╛ рждрж╛рж░ ржмрж╛ржЗрж░рзЗ declare ржХрж░рж╛ред

---

## ЁЯза рж╕рж╣ржЬржнрж╛ржмрзЗ ржоржирзЗ рж░рж╛ржЦрзЛ:

> "Closure ржорж╛ржирзЗ тАФ ржнрж┐рждрж░рзЗрж░ ржлрж╛ржВрж╢ржи ржмрж╛ржЗрж░рзЗрж░ ржнрзЗрж░рж┐рзЯрзЗржмрж▓ ржоржирзЗ рж░рж╛ржЦрзЗ, ржПржоржиржХрж┐ ржмрж╛ржЗрж░рзЗрж░ ржлрж╛ржВрж╢ржи ржХрж╛ржЬ рж╢рзЗрж╖ ржХрж░рж▓рзЗржУред"

---

## тЬЕ рждрзБржорж┐ ржПржЦржи ржерзЗржХрзЗ ржмрзБржЭрзЗ ржлрзЗрж▓рзЗржЫрзЛ:

* `useEffect` ржПрж░ ржнрж┐рждрж░рзЗ ржпрзЗржЗ function ржЧрзБрж▓рзЛ ржЪрж▓рждрзЗ ржерж╛ржХрзЗ (`setInterval`, `cleanup`), рждрж╛рж░рж╛ ржкрзНрж░рж╛рзЯ рж╕ржм рж╕ржорзЯ closure рж╣рзЯред
* React ржирж╛, ржПржЯрж╛ **JS-ржПрж░ behavior**ред

---


### **useEffect-ржПрж░ corner cases** ржорж╛ржирзЗ ржПржоржи ржХрж┐ржЫрзБ ржмрж┐рж╢рзЗрж╖ ржмрж╛ ржЕрж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ ржкрж░рж┐рж╕рзНржерж┐рждрж┐ ржпрзЗржЦрж╛ржирзЗ `useEffect` ржкрзНрж░рждрзНржпрж╛рж╢рж┐рждржнрж╛ржмрзЗ ржХрж╛ржЬ ржирж╛-ржУ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржмрж╛ ржмрж┐ржнрзНрж░рж╛ржирзНрждрж┐ржХрж░ ржЖржЪрж░ржг ржХрж░рзЗред ржПрж╕ржм ржЬрзЗржирзЗ рж░рж╛ржЦрж▓рзЗ рждрзБржорж┐ bug ржмрж╛ performance issue ржПржбрж╝рж╛рждрзЗ ржкрж╛рж░ржмрзЗред

---

## ЁЯФН useEffect Corner Cases Explained (with example)

---

### ЁЯФ╕ 1. **Dependency Array ржнрзБрж▓ржнрж╛ржмрзЗ ржжрзЗрзЯрж╛ (Object, Array, Function)**

#### ЁЯза рж╕ржорж╕рзНржпрж╛:

```jsx
useEffect(() => {
  console.log("Effect ran");
}, [{ a: 1 }]); // ЁЯСИ object is recreated every time
```

#### ЁЯТе ржлрж▓рж╛ржлрж▓:

* ржкрзНрж░рждрж┐ржмрж╛рж░ рж░рзЗржирзНржбрж╛рж░рзЗржЗ effect ржЪрж▓рзЗ, ржХрж╛рж░ржг `{ a: 1 }` === `{ a: 1 }` тЖТ false
* JavaScript ржП object/array/function ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕ржорж╛ржи ржирж╛ (even if structurally same)

#### тЬЕ рж╕ржарж┐ржХ ржЙржкрж╛рзЯ:

```jsx
const obj = useMemo(() => ({ a: 1 }), []);
useEffect(() => {
  console.log("Effect ran once");
}, [obj]);
```

---

### ЁЯФ╕ 2. **Missing Dependency Warning (React strict checking)**

#### ЁЯза рж╕ржорж╕рзНржпрж╛:

```jsx
useEffect(() => {
  fetchData(); // fetchData ржЖрж╕рж▓рзЗ props ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ
}, []);
```

#### ЁЯТе Issue:

* ржпржжрж┐ `fetchData` prop рж╣рзЯ, ржПржмржВ future render ржП рж╕рзЗржЯрж╛ ржЪрзЗржЮрзНржЬ рж╣рзЯ тЖТ рждржмрзБржУ `useEffect` rerun рж╣ржмрзЗ ржирж╛ред

#### тЬЕ рж╕ржарж┐ржХ ржЙржкрж╛рзЯ:

```jsx
useEffect(() => {
  fetchData();
}, [fetchData]); // include it in dependencies
```

---

### ЁЯФ╕ 3. **State update after unmount тЖТ Memory leak warning**

#### ЁЯза рж╕ржорж╕рзНржпрж╛:

```jsx
useEffect(() => {
  setTimeout(() => {
    setUser(data); // ржпржжрж┐ ржПржЗ ржХржорзНржкрзЛржирзЗржирзНржЯ unmount рж╣рзЯрзЗ ржпрж╛рзЯ meantime...
  }, 3000);
}, []);
```

#### ЁЯТе Warning:

* "Can't perform a React state update on an unmounted component"
* Memory leak ржмрж╛ crash рж╣рждрзЗ ржкрж╛рж░рзЗред

#### тЬЕ рж╕ржорж╛ржзрж╛ржи:

```jsx
useEffect(() => {
  let isMounted = true;

  const timer = setTimeout(() => {
    if (isMounted) setUser(data);
  }, 3000);

  return () => {
    isMounted = false;
    clearTimeout(timer);
  };
}, []);
```

---

### ЁЯФ╕ 4. **Multiple state updates causing double re-renders (React.StrictMode)**

#### ЁЯза рж╕ржорж╕рзНржпрж╛:

* React 18+ ржП `StrictMode` ржП `useEffect` ржжрзНржмрж┐ржЧрзБржг рж░рж╛ржи рж╣рзЯ **development mode**-ржПред

```jsx
useEffect(() => {
  console.log("Runs twice in dev mode");
}, []);
```

#### тЬЕ рж╕ржорж╛ржзрж╛ржи:

* ржПржЯрж╛ bug ржирж╛, React ржПрж░ behaviorред production build ржП ржПржХржмрж╛рж░ржЗ ржЪрж▓ржмрзЗред
* ржПржЯрж┐ side effect detect ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред

---

### ЁЯФ╕ 5. **Async function directly inside useEffect тЭМ**

#### ЁЯза рж╕ржорж╕рзНржпрж╛:

```jsx
useEffect(async () => {
  const data = await fetchData();
}, []);
```

#### ЁЯТе Warning:

* useEffect ржПрж░ callback async рж╣рждрзЗ ржкрж╛рж░рзЗ ржирж╛ тЖТ ржПржЯрж┐ Promise рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рзЗ, ржпрж╛ React handle ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛ред

#### тЬЕ рж╕ржарж┐ржХ ржЙржкрж╛рзЯ:

```jsx
useEffect(() => {
  const fetchAsync = async () => {
    const data = await fetchData();
  };
  fetchAsync();
}, []);
```

---

### ЁЯФ╕ 6. **Rapid State Updates causing unexpected behavior**

```jsx
useEffect(() => {
  setCount(count + 1);
}, [count]);
```

#### ЁЯТе Problem:

* ржПржЯрж┐ ржЗржиржлрж┐ржирж┐ржЯ рж▓рзБржк ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржпржжрж┐ guard ржирж╛ ржерж╛ржХрзЗред

#### тЬЕ рж╕ржорж╛ржзрж╛ржи:

```jsx
useEffect(() => {
  if (count < 5) {
    setCount(count + 1);
  }
}, [count]);
```

---

## ЁЯза ржЙржкрж╕ржВрж╣рж╛рж░: useEffect ржП safe ржерж╛ржХрж╛рж░ ржЬржирзНржп ржЯрж┐ржкрж╕

| ЁЯСН ржХрж░рзЛ                                                  | ЁЯСО ржХрж░рзЛ ржирж╛                                                  |
| ------------------------------------------------------- | ---------------------------------------------------------- |
| dependency ржЧрзБрж▓рзЛ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржжрж╛ржУ                            | рж╕рж░рж╛рж╕рж░рж┐ async ржлрж╛ржВрж╢ржи useEffect ржП ржжрж┐ржУ ржирж╛                      |
| cleanup ржлрж╛ржВрж╢ржи ржжрж╛ржУ (interval, timeout, subscription рж╣рж▓рзЗ) | object/array/function ржХрзЗ dependency list ржП directly ржжрж┐ржУ ржирж╛ |
| state update guard ржХрж░рзЛ                                  | state update ржХрзЗ uncontrolled ржЫрзЗржбрж╝рзЗ ржжрж┐ржУ ржирж╛                  |


### **Event with side effect** ржПржмржВ **event without side effect** ржмрзЛржЭрж╛ ржЦрзБржм ржЬрж░рзБрж░рж┐ React ржПржмржВ JavaScript ржЗржнрзЗржирзНржЯ рж╣рзНржпрж╛ржирзНржбрж▓рж┐ржВ ржмрзБржЭрждрзЗ ржЧрзЗрж▓рзЗред

---

## тЬЕ Event Without Side Effect

### ЁЯУМ Definition:

ЁЯСЙ **ржпрзЗрж╕ржм event handler рж╢рзБржзрзБржорж╛рждрзНрж░ component-ржПрж░ local state ржмрж╛ variable update ржХрж░рзЗ** ржПржмржВ ржХрзЛржирзЛ external system-ржПрж░ рж╕рж╛ржерзЗ interact ржХрж░рзЗ ржирж╛ тАФ рждрж╛рж░рж╛ **side effect ржЫрж╛рзЬрж╛ ржЗржнрзЗржирзНржЯ**ред

### тЬЕ ржЙржжрж╛рж╣рж░ржг:

```jsx
function Counter() {
  const [count, setCount] = useState(0);

  const handleClick = () => {
    setCount(prev => prev + 1); // тЬЕ Local state update only
  };

  return <button onClick={handleClick}>Click {count}</button>;
}
```

ЁЯФО ржПржЦрж╛ржирзЗ рж╢рзБржзрзБ state update рж╣рзЯрзЗржЫрзЗ, **ржХрзЛржирзЛ external ржХрж╛ржЬ ржмрж╛ system involvement рж╣рзЯржирж┐**, рждрж╛ржЗ ржПржЯрж╛ **side-effect-free event**ред

---

## тЪая╕П Event With Side Effect

### ЁЯУМ Definition:

ЁЯСЙ ржпрзЗрж╕ржм event handler **component-ржПрж░ ржмрж╛ржЗрж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж┐ржЫрзБ ржХрж░рзЗ (API call, storage, timer, console ржЗрждрзНржпрж╛ржжрж┐)** тАФ рждрж╛рж░рж╛ side effect рждрзИрж░рж┐ ржХрж░рзЗред

### тЬЕ ржЙржжрж╛рж╣рж░ржг:

```jsx
function SaveData() {
  const [name, setName] = useState("");

  const handleSubmit = () => {
    localStorage.setItem("username", name); // тЬЕ Side effect (localStorage used)
    console.log("Name saved"); // тЬЕ Also a side effect
  };

  return (
    <>
      <input onChange={(e) => setName(e.target.value)} />
      <button onClick={handleSubmit}>Save</button>
    </>
  );
}
```

ЁЯФО ржПржЦрж╛ржирзЗ `localStorage.setItem` ржПржмржВ `console.log` тЖТ ржПржЧрзБрж▓рзЛ **side effect**ред

---

## ЁЯЪА Extra: Event With useEffect vs Without useEffect

| Event                     | useEffect ржкрзНрж░рзЯрзЛржЬржи? | Side effect ржЖржЫрзЗ? | Explanation                                                   |
| ------------------------- | ------------------ | ---------------- | ------------------------------------------------------------- |
| `onClick` тЖТ setState only | тЭМ                  | тЭМ                | internal only                                                 |
| `onClick` тЖТ API call      | тЭМ                  | тЬЕ                | side effect рж╣рж▓рзЗржУ useEffect ржирж╛, ржХрж╛рж░ржг ржЗржЙржЬрж╛рж░ action trigger ржХрж░ржЫрзЗ |
| Initial API load          | тЬЕ                  | тЬЕ                | рж░рзЗржирзНржбрж╛рж░рж┐ржВ ржПрж░ ржкрж░ ржЕржЯрзЛржорзЗржЯрж┐ржХ, рждрж╛ржЗ `useEffect`                     |

---

## ЁЯза Rule of Thumb:

| If...                                                     | Then...                |
| --------------------------------------------------------- | ---------------------- |
| You are doing something inside the DOM or external system | It's a **side effect** |
| You are just changing internal state or rendering logic   | **Not** a side effect  |

---

### React-ржП **`props` ржУ `side effect`** ржПржХрж╕рж╛ржерзЗ ржмрж╛ ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ ржнрж╛ржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред ржирж┐ржЪрзЗ ржЖржорж┐ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░ржЫрж┐ ржЪрж╛рж░ржЯрж┐ ржнрж┐ржирзНржи ржнрж┐ржирзНржи ржХрзНрж╖рзЗрждрзНрж░рзЗ:

---

## ЁЯза ржорзВрж▓ ржзрж╛рж░ржгрж╛

**Props:** Parent component тЖТ child component-ржП ржбрзЗржЯрж╛ ржкрж╛ржарж╛ржирзЛрж░ ржорж╛ржзрзНржпржоред
**Side Effect:** Component-ржПрж░ ржмрж╛рж╣рж┐рж░рзЗ ржХрзЛржирзЛ ржХрж╛ржЬ (ржпрзЗржоржи API call, timer, DOM update) ржХрж░рж╛ред

---

## ЁЯФН ржЪрж╛рж░ржЯрж┐ ржХрзЗрж╕ (Props + SideEffect):

| ржХрзЗрж╕ | Props ржЖржЫрзЗ? | Side Effect ржЖржЫрзЗ? | ржмрзНржпрж╛ржЦрзНржпрж╛                                             |
| --- | ---------- | ---------------- | ---------------------------------------------------- |
| 1я╕ПтГг | тЬЕ ржЖржЫрзЗ      | тЬЕ ржЖржЫрзЗ            | Props-ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ ржХрж┐ржЫрзБ effect рж╣рзЯ               |
| 2я╕ПтГг | тЭМ ржирзЗржЗ      | тЬЕ ржЖржЫрзЗ            | Props ржЫрж╛рзЬрж╛ржЗ ржХрзЛржирзЛ ржХрж╛ржЬ рж╣рзЯ (ex: API call)               |
| 3я╕ПтГг | тЬЕ ржЖржЫрзЗ      | тЭМ ржирзЗржЗ            | рж╢рзБржзрзБржЗ UI-рж░ ржнрзЗрждрж░ props ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯ                     |
| 4я╕ПтГг | тЭМ ржирзЗржЗ      | тЭМ ржирзЗржЗ            | ржХрзЛржирзЛ ржмрж╛рж╣рзНржпрж┐ржХ ржХрж╛ржЬ ржмрж╛ props ржирзЗржЗ, purely internal state |

---

### тЬЕ 1. **Props with Side Effect**

**ржпржЦржи ржХрзЛржирзЛ prop change рж╣рж▓рзЗ side effect ржШржЯрзЗ**

```jsx
function UserProfile({ userId }) {
  useEffect(() => {
    // ржПржЗ props (userId) ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ API call
    fetchUserDetails(userId);
  }, [userId]); // dependency list ржП prop

  return <div>Loading...</div>;
}
```

ЁЯУМ ржПржЦрж╛ржирзЗ `userId` prop тЖТ ржпрзЗржЯрж╛ change рж╣рж▓рзЗ ржирждрзБржи effect trigger рж╣рзЯред

---

### тЬЕ 2. **Without Props but With Side Effect**

**ржпржЦржи component ржирж┐ржЬрзЗ ржерзЗржХрзЗржЗ ржХрж┐ржЫрзБ ржХрж╛ржЬ ржХрж░рзЗ, props рж▓рж╛ржЧрзЗ ржирж╛**

```jsx
function Timer() {
  useEffect(() => {
    const id = setInterval(() => {
      console.log("Tick");
    }, 1000);

    return () => clearInterval(id); // cleanup
  }, []); // empty dependency

  return <div>Running timer...</div>;
}
```

ЁЯУМ ржПржЦрж╛ржирзЗ ржХрзЛржирзЛ prop рж▓рж╛ржЧржЫрзЗ ржирж╛ тАФ ржХрж┐ржирзНрждрзБ ржПржХржЯрж╛ side effect ржЖржЫрзЗ (interval setup)ред

---

### тЬЕ 3. **With Props but Without Side Effect**

**ржкрзНрж░рждрж┐ render-ржП UI-рждрзЗ рж╢рзБржзрзБ props ржжрзЗржЦрж╛ржирзЛ рж╣рзЯ, ржХрзЛржирзЛ effect ржирж╛ржЗ**

```jsx
function Greeting({ name }) {
  return <h1>Hello, {name}!</h1>;
}
```

ЁЯУМ ржПржЦрж╛ржирзЗ рж╢рзБржзрзБ UI-рждрзЗ props ржмрзНржпржмрж╣рзГржд тАФ ржХрзЛржирзЛ `useEffect` ржмрж╛ ржмрж╛рж╣рзНржпрж┐ржХ ржХрж╛ржЬ ржирж╛ржЗред

---

### тЬЕ 4. **Without Props and Without Side Effect**

**ржирж┐ржЬрж╕рзНржм state ржмрзНржпржмрж╣рж╛рж░рзЗ UI рж░рзЗржирзНржбрж╛рж░ рж╣рзЯ, ржмрж╛ржЗрж░рзЗ ржХрж┐ржЫрзБ ржШржЯрзЗ ржирж╛**

```jsx
function Counter() {
  const [count, setCount] = useState(0);
  return (
    <button onClick={() => setCount(count + 1)}>Clicked {count}</button>
  );
}
```

ЁЯУМ Purely internal state тАФ ржирж╛ props, ржирж╛ side effectред

---

## ЁЯз╛ Summary Table

| ржХрзЗрж╕                     | ржЙржжрж╛рж╣рж░ржг               | useEffect ржжрж░ржХрж╛рж░? |
| ----------------------- | -------------------- | ---------------- |
| тЬЕ Props + тЬЕ Side Effect | API call with userId | тЬЕ рж╣рзНржпрж╛ржБ          |
| тЭМ Props + тЬЕ Side Effect | Timer/Scroll event   | тЬЕ рж╣рзНржпрж╛ржБ          |
| тЬЕ Props + тЭМ Side Effect | Static UI with props | тЭМ ржирж╛             |
| тЭМ Props + тЭМ Side Effect | Pure state UI        | тЭМ ржирж╛             |

---


### React-ржП `useEffect` ржЕржирзЗржХ powerful рж╣рж▓рзЗржУ, **рж╕ржмржХрж┐ржЫрзБрж░ ржЬржирзНржп `useEffect` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржЙржЪрж┐ржд ржирж╛**ред ржЕржирзЗржХ рж╕ржорзЯ ржирждрзБржи ржбрзЗржнрзЗрж▓ржкрж╛рж░рж░рж╛ рж╕ржм ржХрж╛ржЬрзЗржЗ useEffect ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржлрзЗрж▓рзЗржи, ржпрзЗржЯрж╛ ржХрзЛржбржХрзЗ ржЕржкрзНрж░рзЯрзЛржЬржирзАрзЯржнрж╛ржмрзЗ ржЬржЯрж┐рж▓, ржзрзАрж░ ржПржмржВ ржмрж╛ржЧржкрзНрж░ржмржг ржХрж░рзЗ рждрзЛрж▓рзЗред

### ЁЯЫС ржХржЦржи `useEffect` **ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржЙржЪрж┐ржд ржирж╛**? тАФ ржмрж┐рж╕рзНрждрж╛рж░рж┐рждржнрж╛ржмрзЗ

---

### тЬЕ рзз. **ржпржЦржи рждрзБржорж┐ рж╢рзБржзрзБржЗ state ржмрж╛ variable ржерзЗржХрзЗ ржХрж┐ржЫрзБ рж╣рж┐рж╕рж╛ржм (computation) ржХрж░рждрзЗ ржЪрж╛ржУ**

#### тЭМ ржнрзБрж▓:

```jsx
useEffect(() => {
  setTotal(price * quantity);
}, [price, quantity]);
```

#### тЬЕ рж╕ржарж┐ржХ:

```jsx
const total = price * quantity; // рж╕рж░рж╛рж╕рж░рж┐ рж╣рж┐рж╕рж╛ржм ржХрж░рзЛ, useEffect-ржПрж░ ржжрж░ржХрж╛рж░ ржирж╛ржЗ
```

ЁЯУМ **ржХрж╛рж░ржг:** ржПржЯрж╛ ржПржХржЯрж╛ simple derived value тАФ ржпрзЗржЯрж╛ props ржмрж╛ state ржерзЗржХрзЗ рждрзИрж░рж┐ред
ЁЯСЙ `useEffect` ржжрж┐рзЯрзЗ ржПржЯрж┐ ржХрж░рж╛ ржорж╛ржирзЗ тАФ **ржмрзНрж░рзЗржЗржирзЗрж░ ржЬржирзНржп ржПржХрзНрж╕ржЯрзНрж░рж╛ ржШрзБрж░ржкрж╛ржХ**ред

---

### тЬЕ рзи. **ржпржЦржи рждрзБржорж┐ DOM ржерзЗржХрзЗ ржЗржиржкрзБржЯ ржирж┐ржЪрзНржЫрзЛ, ржХрж┐ржирзНрждрзБ рждрж╛ controlled state ржжрж┐рзЯрзЗржЗ рж╕ржорзНржнржм**

#### тЭМ ржнрзБрж▓:

```jsx
useEffect(() => {
  const input = document.querySelector("#myInput");
  input.addEventListener("change", handleChange);
}, []);
```

#### тЬЕ рж╕ржарж┐ржХ:

```jsx
<input id="myInput" onChange={handleChange} />
```

ЁЯУМ **ржХрж╛рж░ржг:** React ржирж┐ржЬрзЗржЗ event handle ржХрж░рзЗред DOM-manipulation ржХрж░рж╛ рж╣рж▓рзЗ uncontrolled behavior рждрзИрж░рж┐ рж╣рзЯред

---

### тЬЕ рзй. **ржпржЦржи рждрзБржорж┐ рж╢рзБржзрзБржЗ `console.log` ржХрж░рждрзЗ ржЪрж╛ржУ ржХрзЛржирзЛ state ржПрж░ ржЬржирзНржп**

#### тЭМ ржнрзБрж▓:

```jsx
useEffect(() => {
  console.log("Count changed:", count);
}, [count]);
```

#### тЬЕ рж╕ржарж┐ржХ (development ржЫрж╛рзЬрж╛ production ржП console.log ржжрж░ржХрж╛рж░ржЗ ржирж╛):

```jsx
console.log("Count:", count); // рж░рзЗржирзНржбрж╛рж░ ржЯрж╛ржЗржорзЗржЗ ржжрзЗржЦрж╛ ржпрж╛рзЯ
```

ЁЯУМ `useEffect` ржПржЦрж╛ржирзЗ ржмрж╛рзЬрждрж┐ ржХрж╛ржЬред

---

### тЬЕ рзк. **ржпржЦржи рждрзБржорж┐ рж╢рзБржзрзБржЗ user interaction ржП state update ржХрж░ржЫрзЛ**

#### тЭМ ржнрзБрж▓:

```jsx
useEffect(() => {
  if (clicked) {
    setShowMessage(true);
  }
}, [clicked]);
```

#### тЬЕ рж╕ржарж┐ржХ:

```jsx
const handleClick = () => setShowMessage(true);
```

ЁЯУМ Directly event handler ржерзЗржХрзЗржЗ state change ржХрж░рзЛ, side-effect ржХрж░рж╛рж░ ржжрж░ржХрж╛рж░ ржирзЗржЗред

---

### тЬЕ рзл. **useEffect ржжрж┐рзЯрзЗ UI update ржХрж░рждрзЗ ржпрж╛ржУрзЯрж╛** (ржПржЯрж╛ рж░рж┐ржПржХрзНржЯрзЗрж░ ржХрж╛ржЬ!)

#### тЭМ ржнрзБрж▓:

```jsx
useEffect(() => {
  document.getElementById("box").style.backgroundColor = "red";
}, []);
```

#### тЬЕ рж╕ржарж┐ржХ:

```jsx
<div id="box" className={isRed ? "bg-red-500" : "bg-white"}></div>
```

ЁЯУМ React ржПрж░ ржХрж╛ржЬ рж╣рж▓рзЛ declarative UI ржмрж╛ржирж╛ржирзЛ, DOM directly modify ржХрж░рж▓рзЗ performance ржУ readability ржЦрж╛рж░рж╛ржк рж╣рзЯред

---

## ЁЯФБ рж╕ржВржХрзНрж╖рж┐ржкрзНржд рждрж╛рж▓рж┐ржХрж╛: useEffect **ржмрзНржпржмрж╣рж╛рж░ ржирж╛ ржХрж░рж╛рж░ рж╕ржорзЯ**

| ржХрж╛ржЬ                    | useEffect ржжрж░ржХрж╛рж░? | ржХрзЗржи ржирзЯ?                         |
| ---------------------- | ---------------- | ------------------------------- |
| Simple calculation     | тЭМ ржирж╛             | Derived value, directly ржХрж░рж╛ ржпрж╛рзЯ |
| Input event handling   | тЭМ ржирж╛             | React ржирж┐ржЬрзЗржЗ рж╣рзНржпрж╛ржирзНржбрзЗрж▓ ржХрж░рзЗ       |
| Console log only       | тЭМ ржирж╛             | рж░рзЗржирзНржбрж╛рж░ ржЯрж╛ржЗржорзЗржЗ ржжрзЗржЦрж╛ ржпрж╛рзЯ         |
| State update on click  | тЭМ ржирж╛             | Direct event ржерзЗржХрзЗ ржХрж░рж╛ ржпрж╛рзЯ       |
| UI change (like color) | тЭМ ржирж╛             | React ржП declarative way ржЖржЫрзЗ     |

---

## тЬи Bonus: ржХржЦржи `useEffect` ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржЙржЪрж┐ржд?

| ржХрж╛ржЬ                              | useEffect ржжрж░ржХрж╛рж░? |
| -------------------------------- | ---------------- |
| API fetch                        | тЬЕ рж╣рзНржпрж╛ржБ          |
| SetTimeout, SetInterval          | тЬЕ рж╣рзНржпрж╛ржБ          |
| Subscription (WebSocket, Events) | тЬЕ рж╣рзНржпрж╛ржБ          |
| LocalStorage read/write          | тЬЕ рж╣рзНржпрж╛ржБ          |
| Component mount/unmount ржП ржХрж╛ржЬ    | тЬЕ рж╣рзНржпрж╛ржБ          |

---

## ЁЯФЪ ржЙржкрж╕ржВрж╣рж╛рж░

ЁЯУв `useEffect` рж╣рж▓ рж╕рзЗржЗ ржЬрж╛рзЯржЧрж╛ ржпрзЗржЦрж╛ржирзЗ рждрзБржорж┐ **component ржПрж░ ржмрж╛ржЗрж░рзЗ** ржХрзЛржирзЛ side-effect ржХрж░рзЛред
ЁЯУМ ржпржжрж┐ рждрзЛржорж╛рж░ ржХрж╛ржЬ **pure calculation, local state, ржмрж╛ UI update** рж╣рзЯ тАФ рждржмрзЗ `useEffect` рж▓рж╛ржЧржмрзЗ ржирж╛ред

---